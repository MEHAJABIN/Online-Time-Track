
<style>
    
        ul#menu{
            padding: 10
        }
        ul#menu li{
            display: inline-block;
        }
        ul#menu li a{
            background-color:darksalmon;
            color:#366092;
            padding: 5px 10px;
            text-decoration: none;
            font:800 15px cursive ;
                border-radius: 4px 4px 0 0;
        }
        ul#menu li a:hover{
            background-color: #366092;
            color:aqua;
            font: 700 18px fantasy;
            border-radius: 20px 20px 0 0;
        }
        body{
            background-image: url("Background 3.jpg");
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }
        
          </style>
<!DOCTYPE html>
<html>
    <head>
        <title>HTML Page</title>
        <meta charset="utf-8"/>
    </head>
    <body>

            <a href="menu.html">Home</a>
            <a href="logout.html">Logout</a>
            
        <center>
        <form  name="Worklogform" >
            <br><br><br>
            <h1><i>Worklog</i></h1>
            <div>
                 <label for="Token">Token </label>
                   
                 <input type="string" id="Token" name="Token" required/> 
                 
                 <br>

                 <label for="Date">Date</label>
                 <input type="datetime" id="Date" name="Date"/>  
                 
                 <br>
                

                <label for="ProjectID">ProjectID</label>
                <input type="int" id="ProjectID" name="ProjectID"/>  
                
                <br>

                <label for="UserID">UserID</label>
                <input type="int" id="UserID" name="UserID"/>  
                
                <br>
                     
                <label for="Feature">Feature</label>
                <input type="text" id="Feature" name="Feature"/>  
                
                <br>
                     
                 <label for="EstimateWorkTime">EstimateWorkTime</label>
                <input type="int" id="EstimateWorkTime" name="EstimateWorkTime"/>  
                
                <br>

                    
                </div>
         </form>

       <div>
            <input type=button  value="ADD" onClick="POST();"> </button> <br>
        </div>

        <script>
        function POST()
        {
            function reqListener () {
            console.log(this.responseText);
        }

            var Date=document.forms["Worklogform"]["Date"].value;
            var UserID=document.forms["Worklogform"]["UserID"].value;
            var ProjectID=document.forms["Worklogform"]["ProjectID"].value;
            var Feature=document.forms["Worklogform"]["Feature"].value;
            var EstimateWorkTime=document.forms["Worklogform"]["EstimateWorkTime"].value;
            const body = { 
                    Date : Date,
                    UserID : UserID,
                    ProjectID : ProjectID,
                    Feature : Feature,
                    EstimateWorkTime : EstimateWorkTime

                };
                var xhr = new XMLHttpRequest();
             xhr.addEventListener("load", reqListener);
             xhr.open("POST", "https://localhost:44392/api/worklog ");
          
             console.log(body);
            xhr.setRequestHeader("Content-Type","application/json");
            
            var Token = document.forms["Worklogform"]["Token"].value
            xhr.setRequestHeader('Authorization', 'Bearer ' + Token);
            xhr.send(JSON.stringify(body));

};
    
</script>



<form name="GetWorklogform" id="forms">
    <div>
        <label for="Token">Token </label>

        <input type="string" id="Token" name="Token" required />

        <label for="WorklogID">WorklogID </label>

        <input type="long" id="WorklogID" name="WorklogID" /> <br />
    </div>
</form>

<input type="button" value="GETWORKLOG" onclick="getWorklog();" />

<table name="Table" id="table_id" class="display" border="1">
    <thead>
        <tr>
            <th>WorklogID</th>
            <th>ProjectID</th>
            <th>userID</th>
            <th>feature</th>
            <th>estimateWorkTime</th>
           
            
        </tr>
    </thead>

    <tbody id="tablePlace"></tbody>
</table>
<p id="Getproject"></p>

<script>
    function createUserColumn(data) {
        return '<td>' + data + '</td>';
    }

    function generateUserRow(user) {
        var row = '<tr>';
        row += createUserColumn(user.worklogID);
        row += createUserColumn(user.projectID);
        row += createUserColumn(user.userID);
        row += createUserColumn(user.feature);
        row += createUserColumn(user.estimateWorkTime);
       
        row += '</td>';

        return row;
    }

    function showUserDetails(res) {
        var userTableBody = document.getElementById('tablePlace');
        if (userTableBody) {
            userTableBody.innerHTML =generateUserRow(res.data);
        } else {
            alert('Cannot retrieve the element for showing worklog.');
        }
    }

    function getWorklog() {
        function reqListener() {
            showUserDetails(JSON.parse(this.responseText));
        }

        var xhr = new XMLHttpRequest();
        xhr.addEventListener('load', reqListener);
        xhr.open('GET', 'https://localhost:44392/api/worklog/getbyid?id='+ WorklogID.value, true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        var Token = document.forms['GetWorklogform']['Token'].value;
        xhr.setRequestHeader('Authorization', 'Bearer ' + Token);
        xhr.send(WorklogID);
    }
</script>
</center>
</body>
</html>
